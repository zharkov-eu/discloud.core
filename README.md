# Распределенный сервис хранения файлов: discloud.core

### Сценарии использования

* Корпоративное файловое облако (аналог: Google Drive)
* Хранилище пользовательских данных (интеграция с разрабатываемыми сервисами по API)
* CDN (аналог: Cloudflare)

### Концепция

Существуют контейнеры данных, которые могут исполнять две роли - корневой или рядовой. Сервис работоспособен пока работает хотя бы один корневой контейнер. Корневые сервера обеспечивают Service Discovery для всех рядовых контейнеров. Контейнеры способны принимать запросы на запись / чтение файлов. При записи файла возможно указать степень репликации (на скольких контейнерах файл будет физически присутствовать), в том числе конкретные сервисы для репликации. Запрос на чтение файла может быть адресован любому контейнеру, и если файл присутвует в системе (не обязательно физическое присутствие в контейнере) то он будет отдан.

### Примеры

* Корпоративное файловое облако - все разворачиваемые контейнеры в роли корневых. Работа пользователя с SPA интерфейсом (пример: Google Drive) с преднастроенным уровнем репликации на запись равным или менее числу контейнеров. Система работает пока работоспособен хотя бы один мастер, файлы отдаются пока работоспособна хотя бы один контейнер, физически хранящий запрашиваемый файл.
* CDN - создание нескольких корневых сервисов (определяет уровень доступности) и рядовых сервисов во всех регионах доступности. При записи выставленный уровень репликации равный количеству доступных контейнеров (соответственно: на каждом контейнере физически находится файл).
* Хранилище пользовательских данных - создание нескольких корневых сервисов (определяет уровень доступности) и рядовых сервисов во необходимых регионах доступности. При записи - запись на конкретный сервис в регионе (+ репликация при необходимости). Соответсвенно, пользователи из конкретного региона обращаются к своим региональным контейнерам и получают свои данные кратчайшим путем. При обращении не к региональному контейнеру они свои данные так же могут получить, пусть и с некоторыми задержками на внутреннее взаимодействие.

### Сервисы

- Контейнер данных (TypeScript - NodeJS / Cassandra / Redis)
- Фронтэнд  + SPA (TypeScript - NodeJS / React)